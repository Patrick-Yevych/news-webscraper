<!DOCTYPE html>
<html>
<head>
<style>
    body {
        font-family: "Courier New", "Times New Roman";
    }
    th, td {

        border-bottom: 1px solid #ddd;
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    tr:hover {
        background-color:#dcdcdc;
    }
    .inline {
        display: inline;
    }
    .link-button {
        background: none;
        border: none;
        color: blue;
        text-decoration: underline;
        cursor: pointer;
        font-size: 1em;
        font-family: serif;
        padding-right:5px;
    }
    .form-popup {
        display: none;
        background-color: bisque;
    }
</style>
</head>
<body>

    <h2><a href="results">Results</a> | <a href="scrapers">Scrapers</a></h2>

    <button class="link-button" onclick="new_scraper_open()">new</button>
    <br><br>
    <div class="form-popup" id="new_scraper_form">
        <form method="POST" action="scrapers" class="form-container">

        <input type="hidden" name="action_type" value="create_scraper">

        <label for="search_query"><b>search_query:</b></label>
        <input type="text" placeholder="Enter search query..." name="search_query" required>

        <label for="engine"><b>engine:</b></label>
        <input type="text" placeholder="Enter search engine..." name="engine" required>

        <label for="max_pages"><b>max_pages:</b></label>
        <input type="text" placeholder="Enter max number of pages..." name="max_pages" required>

        <label for="page_step"><b>page_step:</b></label>
        <input type="text" placeholder="Enter page step..." name="page_step" required>
        <button type="submit" class="link-button">create</button>
        <button type="button" class="link-button" onclick="new_scraper_close()">close</button>
        </form>
    </div>

    <script>
        function new_scraper_open() {
            document.getElementById("new_scraper_form").style.display = "block";
        }
        function new_scraper_close() {
            document.getElementById("new_scraper_form").style.display = "none";
        }
    </script>
    <br>
    <table style="width:100%">
        <thead>
        <tr>
            <th>search_query</th>
            <th>engine</th>
            <th>max_pages</th>
            <th>page_step</th>
            <th>actions</th>
        </tr>
        </thead>
        <tbody>
        {% for item in data %}
        <tr>
            <td>{{item['search_query']}}</td>
            <td>{{item['engine']}}</td>
            <td>{{item['max_pages']}}</td>
            <td>{{item['page_step']}}</td>
            <td> 
            <form method="POST" action="scrapers" class="inline">
                <input type="hidden" name="action_type" value="run_scraper">
                <input type="hidden" name="search_query" value="{{item['search_query']}}">
                <input type="hidden" name="engine" value="{{item['engine']}}">
                <input type="hidden" name="max_pages" value="{{item['max_pages']}}">
                <input type="hidden" name="page_step" value="{{item['page_step']}}">
                <button type="submit" name="run_btn" value="run_req" class="link-button">run</button>
            </form> 
            
            <form method="POST" action="scrapers" class="inline">
                <input type="hidden" name="action_type" value="delete_scraper">
                <input type="hidden" name="search_query" value="{{item['search_query']}}">
                <input type="hidden" name="engine" value="{{item['engine']}}">
                <button type="submit" name="delete_btn" value="delete_req" class="link-button">delete</button>
            </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

</body>

</html>